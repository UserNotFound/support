!!! 5
%html
  %head
    %meta{ charset: 'utf-8' }
    %meta{ content: 'IE=edge,chrome=1', http_equiv:'X-UA-Compatible' }
    %meta{ name: 'viewport', content: 'width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' }

    -# see config.rb
    = title_tags({ title: @title, category: @category_title, page: current_page })
    = meta_tags({ description: @description, og_type: @og_type })

    %meta{ property: 'og:site_name', content: 'Aptible Support' }
    %meta{ property: 'og:image', content: 'https://www.aptible.com/assets/images/aptible-og.png'}

    %script{ type: 'text/javascript', src: '//use.typekit.net/hen3udh.js' }
    %link{ rel: "shortcut icon", href: "/images/favicon.ico" }
    :javascript
      try{Typekit.load();}catch(e){}
      window.swiftypeEngineKey = '#{swiftype_engine}';
      window.analytics=window.analytics||[],window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(t){if(!document.getElementById("analytics-js")){var a=document.createElement("script");a.type="text/javascript",a.id="analytics-js",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}},window.analytics.SNIPPET_VERSION="2.0.9",
      window.analytics.load('\#{segmentio_write_key}');
      window.analytics.page("{{page.tracked_title}}", null, null, { integrations: { 'Customer.io' : false } });
    = stylesheet_link_tag 'main'
    = javascript_include_tag  'all'

  %body{ class: page_classes }
    %header.primary-header
      .primary-header-bg
        = partial 'navbar'

        - if current_page.data.header_title || current_page.data.header_search
          .container.header-title-container
            %h1.primary-title= current_page.data.header_title
            - if current_page.data.header_subtitle
              %h2.primary-sub-title= current_page.data.header_subtitle
            - if current_page.data.header_search
              .search-bar
                .search-bar-input
                  .input-group
                    %form#search-form{ action: '/search/', method: 'GET' }
                      %input#swifttype-search-input.form-control{ name: 'search', placeholder: 'Search Documentation, Support, and Quickstart guides', type: 'text' }
                      %button.input-group-addon{ type: 'submit' }
                        %i.fa.fa-search
                #st-results-container

    %div{ 'data-swiftype-name' => 'body', 'data-swiftype-type' => 'text', 'data-swiftype-index' => 'true' }
      = yield

    = partial 'footer'

    :javascript
      try{Typekit.load();}catch(e){}

      (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
      })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

      _st('install','#{swiftype_key}');
